<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Student Grades</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 40px 20px;
      background: linear-gradient(135deg, #74ebd5, #ACB6E5);
      color: #333;
      min-height: 100vh;
      overflow-x: hidden;
    }

    h2 {
      text-align: center;
      color: #2c3e50;
      margin-bottom: 30px;
      font-size: 2.2rem;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
    }

    

    #searchInput:focus {
      outline: none;
      box-shadow: 0 0 20px rgba(0,0,0,0.15);
    }

    table {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      border-collapse: collapse;
      border-radius: 12px;
      overflow: hidden;
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    th, td {
      padding: 15px;
      text-align: center;
      border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    }

    th {
      background: #4A90E2;
      color: white;
      font-weight: bold;
      text-transform: uppercase;
    }

    tr:nth-child(even) {
      background-color: rgba(255,255,255,0.5);
    }

    button {
      padding: 10px 18px;
      background: #4A90E2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
    }

    button:hover {
      background: #357ABD;
      transform: scale(1.05);
    }

    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
      z-index: 999;
    }

    .modal.show {
      display: flex;
    }

    .modal-content {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(12px);
      padding: 30px;
      border-radius: 16px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateY(-50px);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .modal-content h3 {
      margin-bottom: 20px;
      font-size: 1.5rem;
      color: #333;
    }

    .modal-content select,
    .modal-content input {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
    }

    .modal-content label {
      display: block;
      margin-top: 10px;
    }

    .modal-content .actions {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
    }

    .modal-content button:first-of-type {
      background: #2ecc71;
    }

    .modal-content button:last-of-type {
      background: #e74c3c;
    }

    @media (max-width: 600px) {
      th, td {
        font-size: 14px;
        padding: 10px;
      }

      button {
        padding: 8px 14px;
      }
    }
    .tab-button:hover {
      background: #2980b9;
    }
    #searchInput {
      width: 100%;
      max-width: 400px;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
    }
    .tab-button.active {
      background: #1f6391;
      font-weight: bold;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }

    .form-section {
      background: white;
      padding: 20px;
      border-radius: 10px;
      max-width: 500px;
      margin: auto;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
    }

    label {
      display: block;
      margin-top: 15px;
    }
    .tab-button {
        margin-bottom: 20px;
 
    }
    input, select{
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    

    
    .tabs{
        display: flex;
        justify-content: center;
        margin-bottom: 20px;
        gap: 20px;
    }
    .search-box {
      display: flex;
      justify-content: center;
     
    }



    .search-input,
    .form-input,
    .file-input,
    .readonly-input {
      width: 100%;
      padding: 10px;
      margin: 6px 0 12px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-sizing: border-box;
    }

    .action-button {
      padding: 10px 18px;
      border: none;
      background-color: #3498db;
      color: white;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.3s ease;
      margin-top: 5px;
    }

    .action-button:hover {
      background-color: #2980b9;
    }

    .table-container {
      overflow-x: auto;
      margin-top: 10px;
    }

    .student-table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 15px;
      border: 2px solid #000000;
    }

    .student-table th, .student-table td {
      text-align: left;
      padding: 12px;
      border-bottom: 1px solid #000000;
    }

    .student-table th {
      background-color: #ecf0f1;
      color: #2c3e50;
    }

    .edit-button {
      background-color: #2980b9;
      color: white;
      font-size: 0.9em;
      width: 80px;
      border-radius: 6px;
      border: none;
      cursor: pointer;
      margin-top: 1px;
      height: 40px;
    }

    .edit-button:hover {
      background-color: #032f4d;
    }

    .modal4 {
      display: none;
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #fff;
      border: 1px solid #ccc;
      padding: 20px;
      z-index: 1000;
      width: 90%;
      max-width: 400px;
      border-radius: 12px;
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
      height: 500px;
      overflow-y: auto;
    }

    .modal4 h3 {
      text-align: center;
      color: #2c3e50;
    }

    .modal button {
      width: 48%;
      margin: 4px 1%;
    }

    .preview-image {
      display: block;
      margin: 10px auto;
      border-radius: 10px;
      border: 1px solid #ccc;
      max-width: 100px;
    }

    .status-message {
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
      font-size: 1rem;
      color: #555;
    }
    .search-box-div{
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    
  </style>
</head>
<body>
  
   <!-- TAB buttons -->
   <div class="tabs">
    <button class="tab-button active" data-tab="tab1">View And Edit Grades</button>
    <button class="tab-button" data-tab="tab2">Register Students</button>
    <button class="tab-button" data-tab="tab3">Add Grades</button>
    <button class="tab-button" data-tab="tab4">Edit Studnt Info</button>
    <button class="tab-button" id="logoutBtn" onclick="logout()">Logout</button>
  </div>
 

 

 <div id="tab2" class="tab-content">
    <!-- Add Student -->
  <div id="addStudent" class="tab active">
    <div class="form-section">
      <h2>Add Student</h2>
      <form id="studentForm">
        <label>ID <input type="text" name="id" required /></label>
        <label>Password <input type="text" name="password" required /></label>
        <label>Name <input type="text" name="name" required /></label>
        <label>Gender 
          <select name="gender">
            <option>Male</option>
            <option>Female</option>
          </select>
        </label>
        <label>Class <input type="text" name="class" required /></label>
        <label>Guardian <input type="text" name="guardian" /></label>
        <label>Teacher <input type="text" name="teacher" /></label>
        <label>Contact <input type="text" name="contact" /></label>
        <label>Image <input type="file" name="image" accept="image/*" required /></label>
        <label>Role 
          <select name="role">
            <option>Student</option>
            <option>Admin</option>
          </select>
        </label>
        <button type="submit">Register</button>
      </form>
      <p id="status"></p>
    </div>
  </div>
    
 </div>
 <div id="tab1" class="tab-content active">
  <!-- Your original content here -->
  <h2>Student Grade Management</h2>
 <div class="search-box">
  <input type="text" id="searchInput" placeholder="Search by name or ID" oninput="filterTable()">
</div>
  <table id="studentsTable">
 
    <thead>
      <tr><th>ID</th><th>Name</th><th>Class</th><th>Action</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="modal" id="editModal">
    <div class="modal-content">
      <h3>Edit Grade</h3>
      <p><strong>ID:</strong> <span id="modalID"></span></p>
      <select id="termSelect">
        <option value="1">Term 1</option>
        <option value="2">Term 2</option>
        <option value="3">Term 3</option>
      </select>
      <select id="subjectSelect">
        <option>Math</option>
        <option>English</option>
        <option>Science</option>
        <option>Social Studies</option>
        <option>History</option>
        <option>Geography</option>
        <option>Physics</option>
        <option>Chemistry</option>
        <option>Biology</option>
        <option>ICT</option>
        <option>Religious Studies</option>
        <option>Music</option>
        <option>Physical Education</option>
        <option>Art</option>
      </select>
      <label>Grade:
        <input type="number" id="gradeInput">
      </label>
      <br>
      <div style="display: flex; justify-content: space-between;">
        <button onclick="saveGrade()">Save</button>
        <button onclick="closeModal()">Cancel</button>
      </div>
    </div>
  </div>
</div>
 <div id="tab3" class="tab-content">
  <div id="addGrades" class="tab">
    <div class="form-section">
      <h2>Add Grades</h2>
      <form id="gradesForm">
        <label>Student ID <input type="text" name="studentID" id="studentId" required /></label>
  
        <label>Term 
          <select name="term" id="term" required>
            <option value="">Select Term</option>
            <option value="Term 1">Term 1</option>
            <option value="Term 2">Term 2</option>
            <option value="Term 3">Term 3</option>
          </select>
        </label>
  
        <label>Subject
          <select name="subject" id="subject" required>
            <option value="">Select Subject</option>
            <option>Math</option><option>English</option><option>Science</option>
            <option>Social Studies</option><option>History</option><option>Geography</option>
            <option>Physics</option><option>Chemistry</option><option>Biology</option>
            <option>ICT</option><option>Religious Studies</option><option>Music</option>
            <option>Physical Education</option><option>Art</option>
          </select>
        </label>
  
        <label>Marks <input type="number" name="marks" id="marks" min="0" max="100" required /></label>
        <label>Position (optional) <input type="text" name="position" id="position" /></label>
  
        <button type="submit">Submit Grades</button>
        <p id="gradesStatus" style="text-align:center; margin-top: 10px; font-weight: bold;"></p>
      </form>
    </div>
  </div>
   
 </div>
 <div id="tab4" class="tab-content">
  <div class="container">
    <h2>All Students</h2>
    <div class="search-box-div">
      <input type="text" id="searchInput2" class="search-input" placeholder="Search by name, class, or ID..." oninput="searchStudents()" />
    <button onclick="fetchAllStudents()" class="action-button">Fetch All Students</button>
    </div>
  
    <div class="table-container">
      <table class="student-table" id="studentList" border="1">
        <thead>
          <tr>
            <th>ID</th><th>Name</th><th>Class</th><th>Gender</th><th>Contact</th>
            <th>Guardian</th><th>Teacher</th><th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
    <p id="statusText" class="status-message"></p>
  </div>
 
  
  <!-- Edit Student Modal -->
  <div id="editStudentModal" class="modal4">
    <h3>Edit Student</h3>
    <input id="editID" class="readonly-input" placeholder="ID" readonly />
    <input id="editName" class="form-input" placeholder="Name" />
    <input id="editClass" class="form-input" placeholder="Class" />
    <input id="editGender" class="form-input" placeholder="Gender" />
    <input id="editContact" class="form-input" placeholder="Contact" />
    <input id="editGuardian" class="form-input" placeholder="Guardian" />
    <input id="editTeacher" class="form-input" placeholder="Teacher" />
    <input id="editPassword" class="form-input" placeholder="Password" />
  
    <label>Upload New Image</label>
    <input type="file" id="editImageInput" class="file-input" accept="image/*" />
    <img id="imagePreview" class="preview-image" src="" alt="Current Image" /><br />
  
    <button onclick="saveEdit()" class="action-button">Save</button>
    <button onclick="closeModal2()" class="action-button">Cancel</button>
  </div>
 
  
 </div>

  
</body>
<script>
  // TAB switching logic - only added, original JS is untouched
  const tabs = document.querySelectorAll(".tab-button");
  const contents = document.querySelectorAll(".tab-content");

  tabs.forEach(tab => {
    tab.addEventListener("click", () => {
      // Remove active class from all buttons and contents
      tabs.forEach(btn => btn.classList.remove("active"));
      contents.forEach(c => c.classList.remove("active"));

      // Add active class to clicked tab and corresponding content
      tab.classList.add("active");
      document.getElementById(tab.dataset.tab).classList.add("active");
    });
  });

  // YOUR ORIGINAL JAVASCRIPT BELOW (unchanged)

  const SHEETDB_URL = "https://sheetdb.io/api/v1/o3rftiwfdnjuf";
  let students = [];
  let selectedStudent = null;

  async function fetchStudents() {
    const res = await fetch(SHEETDB_URL);
    students = await res.json();
    populateTable();
  }

  function populateTable() {
    const tbody = document.querySelector("#studentsTable tbody");
    tbody.innerHTML = "";
    students.forEach(st => {
      const row = `<tr>
        <td>${st.ID}</td>
        <td>${st.Name}</td>
        <td>${st.Class}</td>
        <td><button onclick='openModal("${st.ID}")'>Edit Grade</button></td>
      </tr>`;
      tbody.innerHTML += row;
    });
  }

  function filterTable() {
    const query = document.getElementById("searchInput").value.toLowerCase();
    const rows = document.querySelectorAll("#studentsTable tbody tr");
    rows.forEach(row => {
      const text = row.innerText.toLowerCase();
      row.style.display = text.includes(query) ? "" : "none";
    });
  }

  function openModal(id) {
    selectedStudent = students.find(s => s.ID === id);
    document.getElementById("modalID").innerText = id;
    document.getElementById("termSelect").value = "1";
    document.getElementById("subjectSelect").value = "Math";
    loadGrade();
    document.getElementById("editModal").style.display = "flex";
  }

  function closeModal() {
    document.getElementById("editModal").style.display = "none";
  }

  function loadGrade() {
    const term = document.getElementById("termSelect").value;
    const subject = document.getElementById("subjectSelect").value;
    const key = `${subject} Term ${term} Marks`;
    const grade = selectedStudent[key] || "";
    document.getElementById("gradeInput").value = grade;
  }

  document.getElementById("termSelect").onchange = loadGrade;
  document.getElementById("subjectSelect").onchange = loadGrade;

  async function saveGrade() {
    const term = document.getElementById("termSelect").value;
    const subject = document.getElementById("subjectSelect").value;
    const key = `${subject} Term ${term} Marks`;
    const newGrade = document.getElementById("gradeInput").value;

    const body = { [key]: newGrade };
    await fetch(`${SHEETDB_URL}/ID/${selectedStudent.ID}`, {
      method: "PATCH",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ data: body })
    });

    selectedStudent[key] = newGrade;
    alert("Grade updated!");
    closeModal();
  }

  fetchStudents();
</script>
  <script>


    document.getElementById("studentForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const form = e.target;
      const status = document.getElementById("status");
      status.textContent = "Uploading image...";

      // Get form values
      const formData = new FormData(form);
      const imageFile = formData.get("image");

      // Upload image to Cloudinary
      const cloudinaryData = new FormData();
      cloudinaryData.append("file", imageFile);
      cloudinaryData.append("upload_preset", "student_upload");

      const cloudinaryRes = await fetch("https://api.cloudinary.com/v1_1/dppemrnmw/image/upload", {
        method: "POST",
        body: cloudinaryData
      });

      if (!cloudinaryRes.ok) {
        status.textContent = "❌ Image upload failed.";
        return;
      }

      const cloudinaryResult = await cloudinaryRes.json();
      const imageUrl = cloudinaryResult.secure_url;

      // Prepare data to send to SheetDB
      const dataToSend = {
        data: {
          id: formData.get("id"),
          password: formData.get("password"),
          name: formData.get("name"),
          gender: formData.get("gender"),
          class: formData.get("class"),
          guardian: formData.get("guardian"),
          teacher: formData.get("teacher"),
          contact: formData.get("contact"),
          image: imageUrl,
          role: formData.get("role")
        }
      };

      status.textContent = "Sending to SheetDB...";

      // Send to SheetDB
      const sheetRes = await fetch("https://sheetdb.io/api/v1/o3rftiwfdnjuf", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(dataToSend)
      });

      if (sheetRes.ok) {
        status.textContent = "✅ Student added successfully!";
        form.reset();
      } else {
        status.textContent = "❌ Failed to send data to Google Sheets.";
      }
    });
  </script> 


  <script>
    document.getElementById("studentForm").addEventListener("submit", async function (e) {
  e.preventDefault();
  const form = e.target;
  const status = document.getElementById("status");
  const submitButton = form.querySelector("button[type='submit']");
  
  submitButton.disabled = true;
  status.textContent = "Uploading image...";

  // Get form values
  const formData = new FormData(form);
  const imageFile = formData.get("image");

  try {
    // Upload image to Cloudinary
    const cloudinaryData = new FormData();
    cloudinaryData.append("file", imageFile);
    cloudinaryData.append("upload_preset", "student_upload");

    const cloudinaryRes = await fetch("https://api.cloudinary.com/v1_1/dppemrnmw/image/upload", {
      method: "POST",
      body: cloudinaryData
    });

    if (!cloudinaryRes.ok) {
      throw new Error("Image upload failed");
    }

    const cloudinaryResult = await cloudinaryRes.json();
    const imageUrl = cloudinaryResult.secure_url;

    // Prepare data to send to SheetDB
    const dataToSend = {
      data: {
        ID: formData.get("id"),
        Password: formData.get("password"),
        Name: formData.get("name"),
        Gender: formData.get("gender"),
        Class: formData.get("class"),
        Guardian: formData.get("guardian"),
        Teacher: formData.get("teacher"),
        Contact: formData.get("contact"),
        Image: imageUrl,
        Role: formData.get("role"),
        // Marks and positions can be added later in a separate form
      }
    };

    status.textContent = "Sending to SheetDB...";

    // Send to SheetDB
    const sheetRes = await fetch("https://sheetdb.io/api/v1/o3rftiwfdnjuf", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(dataToSend)
    });

    if (!sheetRes.ok) {
      throw new Error("Failed to send data to Google Sheets");
    }

    status.textContent = "✅ Student added successfully!";
    form.reset();

  } catch (error) {
    status.textContent = `❌ ${error.message}`;
  } finally {
    submitButton.disabled = false;
  }
});


// this below if you want to add grades
document.getElementById("gradesForm").addEventListener("submit", async function(e) {
  e.preventDefault();
  const form = e.target;
  const status = document.getElementById("gradesStatus");
  const submitButton = form.querySelector("button[type='submit']");
  submitButton.disabled = true;
  status.textContent = "Submitting grades...";

  const studentID = form.studentID.value.trim();
  const term = form.term.value;
  const subject = form.subject.value;
  const marks = form.marks.value;
  const position = form.position.value.trim();

  const marksColumn = `${subject} ${term} Marks`;
  const positionColumn = `${term} Position`;

  const dataToSend = {
    data: {
      [marksColumn]: marks,
    }
  };

  if (position) {
    dataToSend.data[positionColumn] = position;
  }

  try {
    // Use PUT method and add studentId filter in URL to update existing record
    const response = await fetch(`https://sheetdb.io/api/v1/jegianr2zgvn7/ID/${studentID}`, {
      method: "PUT", // or PATCH (SheetDB supports both)
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(dataToSend)
    });

    if (!response.ok) throw new Error("Failed to submit grades");

    status.textContent = "✅ Grades updated successfully!";
    form.reset();
  } catch (error) {
    status.textContent = `❌ ${error.message}`;
    console.error("Error submitting grades:", error);
  } finally {
    submitButton.disabled = false;
  }
});

// Logout function
function logout() {
    // Redirect to login page
    window.location.href = "index.html";
  }


    //this below is for view and edit students
  // Function to fetch all students and display them in the table
  

  </script>
  <script>
    const API_URL = "https://sheetdb.io/api/v1/o3rftiwfdnjuf";
    const CLOUDINARY_URL = "https://api.cloudinary.com/v1_1/dppemrnmw/image/upload";
    const CLOUDINARY_PRESET = "student_upload";
  
    async function fetchAllStudents() {
      const status = document.getElementById("statusText");
      status.textContent = "Fetching students...";
      try {
        const response = await fetch(API_URL);
        const students = await response.json();
        populateStudentsTable(students);
        status.textContent = `✅ ${students.length} students found`;
      } catch (err) {
        status.textContent = "❌ Failed to fetch students";
        console.error(err);
      }
    }
  
    function populateStudentsTable(students) {
      const tbody = document.querySelector("#studentList tbody");
      tbody.innerHTML = "";
      students.forEach(student => {
        const row = document.createElement("tr");
        row.innerHTML = `
          <td>${student.ID}</td>
          <td>${student.Name}</td>
          <td>${student.Class}</td>
          <td>${student.Gender}</td>
          <td>${student.Contact}</td>
          <td>${student.Guardian}</td>
          <td>${student.Teacher}</td>
          <td>
            <button class="edit-button" onclick='openEditModal(${JSON.stringify(student)})'>Edit</button>
            <button onclick='deleteStudent("${student.ID}")' class="edit-button" style="background:#e74c3c;">Delete</button>
          </td>
        `;
        tbody.appendChild(row);
      });
    }
  
    function searchStudents() {
      const input = document.getElementById("searchInput2").value.toLowerCase();
      const rows = document.querySelectorAll("#studentList tbody tr");
      rows.forEach(row => {
        const text = row.textContent.toLowerCase();
        row.style.display = text.includes(input) ? "" : "none";
      });
    }
  
    function openEditModal(student) {
      document.getElementById("editID").value = student.ID || "";
      document.getElementById("editName").value = student.Name || "";
      document.getElementById("editClass").value = student.Class || "";
      document.getElementById("editGender").value = student.Gender || "";
      document.getElementById("editContact").value = student.Contact || "";
      document.getElementById("editGuardian").value = student.Guardian || "";
      document.getElementById("editTeacher").value = student.Teacher || "";
      document.getElementById("editPassword").value = student.Password || "";
      document.getElementById("imagePreview").src = student.Image || "";
  
      document.getElementById("editStudentModal").style.display = "block";
    }
  
    function closeModal2() {
      document.getElementById("editStudentModal").style.display = "none";
      document.getElementById("editImageInput").value = "";
    }
  
    async function saveEdit() {
      const id = document.getElementById("editID").value;
      const fileInput = document.getElementById("editImageInput");
      let imageUrl = document.getElementById("imagePreview").src;
  
      if (fileInput.files.length > 0) {
        const imageData = new FormData();
        imageData.append("file", fileInput.files[0]);
        imageData.append("upload_preset", CLOUDINARY_PRESET);
  
        try {
          const uploadRes = await fetch(CLOUDINARY_URL, {
            method: "POST",
            body: imageData
          });
          const uploadResult = await uploadRes.json();
          imageUrl = uploadResult.secure_url;
        } catch (err) {
          alert("❌ Image upload failed");
          return;
        }
      }
  
      const updatedData = {
        data: {
          Name: document.getElementById("editName").value,
          Class: document.getElementById("editClass").value,
          Gender: document.getElementById("editGender").value,
          Contact: document.getElementById("editContact").value,
          Guardian: document.getElementById("editGuardian").value,
          Teacher: document.getElementById("editTeacher").value,
          Password: document.getElementById("editPassword").value,
          Image: imageUrl
        }
      };
  
      try {
        const res = await fetch(`${API_URL}/ID/${id}`, {
          method: "PATCH",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(updatedData)
        });
  
        if (!res.ok) throw new Error("Update failed");
  
        alert("✅ Student updated!");
        closeModal2();
        fetchAllStudents();
      } catch (err) {
        alert("❌ Failed to update student");
        console.error(err);
      }
    }
  
    async function deleteStudent(id) {
      const confirmDelete = confirm("Are you sure you want to delete this student?");
      if (!confirmDelete) return;
  
      try {
        const res = await fetch(`${API_URL}/ID/${id}`, {
          method: "DELETE"
        });
  
        if (!res.ok) throw new Error("Delete failed");
  
        alert("✅ Student deleted!");
        fetchAllStudents();
      } catch (err) {
        alert("❌ Failed to delete student");
        console.error(err);
      }
    }
  </script>
 
</html>
